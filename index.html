<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Hon Gisiri Maroa — CIAP Nyabasi West (Demo)</title>
  <meta name="description" content="Demo — Community Intelligence & Action Platform (CIAP) for Nyabasi West. Responsive iPhone-style UI with demo content." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f2f4f8;
      --card:#ffffff;
      --brand:#4b2b7f;
      --glass: rgba(255,255,255,0.6);
      --muted:#6b7280;
      --success:#10b981;
      --danger:#ef4444;
      --iPhoneSafeTop: env(safe-area-inset-top, 16px);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;background:linear-gradient(180deg,var(--bg),#eef0f5);color:#0b1220;-webkit-font-smoothing:antialiased}
    /* iPhone style container */
    .device{max-width:420px;margin:18px auto;padding-top:var(--iPhoneSafeTop);border-radius:28px;overflow:hidden;box-shadow:0 30px 60px rgba(10,20,40,0.12), inset 0 1px 0 rgba(255,255,255,0.6);background:linear-gradient(180deg, rgba(255,255,255,0.65), rgba(255,255,255,0.5));border:1px solid rgba(11,18,32,0.04)}
    header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;backdrop-filter:blur(6px)}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:12px;background:linear-gradient(180deg,var(--card),#fff);display:flex;align-items:center;justify-content:center;color:var(--brand);font-weight:800;box-shadow:0 6px 18px rgba(75,43,127,0.08)}
    .title{font-weight:700}
    .subtitle{font-size:12px;color:var(--muted)}

    /* Navbar / hamburger */
    .nav-toggle{display:flex;align-items:center;gap:8px}
    .burger{width:44px;height:44px;border-radius:10px;background:var(--card);display:flex;align-items:center;justify-content:center;border:1px solid rgba(11,18,32,0.04);cursor:pointer}
    .burger .lines{width:18px;height:2px;background:#111;border-radius:2px;position:relative}
    .burger .lines::before,.burger .lines::after{content:'';position:absolute;left:0;right:0;height:2px;background:#111;border-radius:2px}
    .burger .lines::before{top:-6px}
    .burger .lines::after{top:6px}

    .nav-panel{position:relative}
    .nav-menu{position:absolute;right:16px;top:64px;background:linear-gradient(180deg,var(--card),#fff);border-radius:14px;padding:8px;width:260px;box-shadow:0 20px 40px rgba(11,18,32,0.12);transform-origin:top right;opacity:0;pointer-events:none;transform:scale(.98) translateY(-6px);transition:all .22s cubic-bezier(.2,.9,.3,1)}
    .nav-menu.show{opacity:1;pointer-events:auto;transform:scale(1) translateY(0)}
    .nav-menu button{display:block;width:100%;text-align:left;padding:10px;border-radius:10px;border:0;background:transparent;cursor:pointer}
    .nav-menu button:hover{background:#f5f7fb}

    main{padding:16px}
    .stack{display:flex;flex-direction:column;gap:12px}
    .card{background:var(--card);border-radius:14px;padding:14px;box-shadow:0 8px 30px rgba(11,18,32,0.06);border:1px solid rgba(11,18,32,0.03)}
    .hero{display:flex;gap:12px;align-items:center}
    .avatar{width:84px;height:84px;border-radius:18px;background:linear-gradient(180deg,#fff,rgba(255,255,255,0.6));display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--brand);font-size:24px}

    h2{margin:0 0 6px 0}
    p.small{margin:0;color:var(--muted);font-size:13px}

    /* gallery */
    .carousel{height:160px;border-radius:10px;overflow:hidden;position:relative}
    .carousel img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .85s cubic-bezier(.2,.9,.3,1)}
    .carousel .dots{position:absolute;left:10px;bottom:10px;display:flex;gap:8px}
    .dot{width:8px;height:8px;border-radius:8px;background:rgba(0,0,0,0.25)}
    .dot.active{width:28px;border-radius:8px;background:linear-gradient(90deg,var(--brand),var(--accent));box-shadow:0 6px 18px rgba(75,43,127,0.12)}

    /* lists */
    .list-item{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #f2f4f8}
    .badge{padding:6px 8px;border-radius:999px;background:#f1f5f9;font-weight:700;font-size:12px}

    /* responsive tweaks */
    @media (min-width:600px){.device{max-width:720px;border-radius:20px}}

    /* animations */
    @keyframes floaty{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
    .float{animation:floaty 5s ease-in-out infinite}

    .btn-row{display:flex;gap:8px}
    .btn{padding:10px 12px;border-radius:10px;border:0;background:var(--brand);color:#fff;font-weight:700;cursor:pointer}
    .ghost{background:transparent;border:1px solid rgba(11,18,32,0.06);color:#0b1220}

    /* modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.5);display:flex;align-items:center;justify-content:center;z-index:9999}
    .modal{width:640px;max-width:94%;border-radius:12px;overflow:hidden}

    /* small helpers */
    .muted{color:var(--muted)}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    input,textarea,select{width:100%;padding:10px;border-radius:10px;border:1px solid #eef2f7}
  </style>
</head>
<body>
  <div class="device" role="application" aria-label="CIAP Demo">
    <header>
      <div class="brand">
        <div class="logo">GM</div>
        <div>
          <div class="title">Hon Gisiri Maroa</div>
          <div class="subtitle">Aspiring MCA — Nyabasi West</div>
        </div>
      </div>
      <div class="nav-panel">
        <div class="nav-toggle">
          <div class="burger" id="burger" aria-label="Toggle menu" role="button" tabindex="0">
            <div class="lines"></div>
          </div>
        </div>
        <div class="nav-menu" id="navMenu" aria-hidden="true">
          <button data-route="home">Home</button>
          <button data-route="reports">Report</button>
          <button data-route="opps">Opportunities</button>
          <button data-route="volunteer">Volunteer</button>
          <button data-route="donate">Donate</button>
          <button data-route="blog">Blog</button>
          <button data-route="portfolio">Portfolio</button>
          <button data-route="admin">Admin</button>
        </div>
      </div>
    </header>

    <main id="mainRoot"></main>

    <footer style="padding:12px 16px;text-align:center;color:var(--muted);font-size:13px">© Hon Gisiri Maroa • CIAP Demo</footer>
  </div>

  <script>
  (function(){
    // Simple SPA with demo data if Firebase not configured
    const root = document.getElementById('mainRoot');
    const navMenu = document.getElementById('navMenu');
    const burger = document.getElementById('burger');
    burger.addEventListener('click', ()=>{navMenu.classList.toggle('show'); navMenu.setAttribute('aria-hidden', String(!navMenu.classList.contains('show')))});

    document.addEventListener('click', (e)=>{ if(!navMenu.contains(e.target) && !burger.contains(e.target)) { navMenu.classList.remove('show'); navMenu.setAttribute('aria-hidden','true') } });
    document.querySelectorAll('[data-route]').forEach(b=>b.addEventListener('click', (e)=>{ e.preventDefault(); navigate(b.dataset.route); navMenu.classList.remove('show'); navMenu.setAttribute('aria-hidden','true') }));

    function createEl(tag, props={}, children=[]) { const el = document.createElement(tag); Object.assign(el, props); (children||[]).forEach(c => typeof c === 'string' ? el.appendChild(document.createTextNode(c)) : el.appendChild(c)); return el }

    // Demo data
    const DEMO_POSTS = [
      {id:'p1',title:'Youth Agritech Grants',excerpt:'How small agritech grants are helping farmers increase yields.',content:'We piloted...'},
      {id:'p2',title:'Community Borehole Success',excerpt:'How the community mobilized to fix Nyabasi boreholes.',content:'Case study...'},
      {id:'p3',title:'Transparency Brief — Market Funds',excerpt:'A short audit of market fees and spending.',content:'Audit summary...'}
    ];
    const DEMO_REPORTS = [
      {id:'r1',title:'Broken Borehole at Nyabasi Center',category:'Water',location:'Nyabasi Center',desc:'Pump broken for 3 weeks',status:'published'},
      {id:'r2',title:'Impassable Road to Market',category:'Roads',location:'Makwesa',desc:'Damaged bridge after rains',status:'open'}
    ];
    const DEMO_OPPS = [
      {id:'o1',title:'Livestock Vaccination Drive',summary:'Free vaccines for small-scale farmers this Friday.'},
      {id:'o2',title:'Youth Coding Bootcamp',summary:'2-week training in mobile app dev — apply by Monday.'}
    ];
    const DEMO_VOL = [ {uid:'v1',name:'Alice'}, {uid:'v2',name:'Brian'} ];
    const DEMO_DON = [ {amount:5000,uid:'v1',status:'intent'}, {amount:2000,uid:null,status:'completed'} ];

    // Simple router
    const routes = {};
    function register(path,fn){ routes[path]=fn }
    async function navigate(path){ window.location.hash = path; root.innerHTML = ''; if(routes[path]) await routes[path](); else root.appendChild(createEl('div',{},['Page not found'])); }

    // Home
    register('home', async ()=>{
      const stack = createEl('div',{className:'stack'});
      const hero = createEl('div',{className:'card hero'});
      const left = createEl('div',{style:'display:flex;gap:12px;align-items:center'});
      left.appendChild(createEl('div',{className:'avatar float'},['GM']));
      const info = createEl('div'); info.appendChild(createEl('div',{className:'title'},['Hon Gisiri Maroa'])); info.appendChild(createEl('div',{className:'muted'},['Aspiring MCA — Nyabasi West'])); info.appendChild(createEl('p',{className:'small'},['Youth empowerment • Agriculture • Accountability • Functional services']));
      hero.appendChild(left); hero.appendChild(info);
      stack.appendChild(hero);

      // quick action cards
      const actions = createEl('div',{className:'grid-2'});
      actions.appendChild(createEl('div',{className:'card'},[createEl('h2',{},['Report Problem']), createEl('p',{className:'small'},['Submit a community issue.']), createEl('div',{className:'btn-row',style:'margin-top:8px'},[createEl('button',{className:'btn',onclick:()=>navigate('reports')},['Report']), createEl('button',{className:'btn ghost',onclick:()=>navigate('opps')},['Opportunities'])]) ]));
      actions.appendChild(createEl('div',{className:'card'},[createEl('h2',{},['Support Projects']), createEl('p',{className:'small'},['Donate to visible village projects and see ledger.']), createEl('div',{className:'btn-row',style:'margin-top:8px'},[createEl('button',{className:'btn',onclick:()=>navigate('donate')},['Donate']), createEl('button',{className:'btn ghost',onclick:()=>navigate('volunteer')},['Volunteer'])]) ]));
      stack.appendChild(actions);

      // Gallery carousel
      const galCard = createEl('div',{className:'card'});
      galCard.appendChild(createEl('h2',{},['Gallery']));
      const carousel = createEl('div',{className:'carousel'});
      const gimg = createEl('img',{src:DEMO_POSTS[0] && 'https://images.unsplash.com/photo-1505765052875-6c0a0a9e07b5?auto=format&fit=crop&w=1200&q=60'});
      carousel.appendChild(gimg);
      const dots = createEl('div',{className:'dots'});
      DEMO_POSTS.forEach((p,i)=>{ const d = createEl('div',{className:'dot'+(i===0?' active':''),onclick:()=>{ gimg.src = ['https://images.unsplash.com/photo-1505765052875-6c0a0a9e07b5?auto=format&fit=crop&w=1200&q=60','https://images.unsplash.com/photo-1520975919516-6f9cf2e2d9b0?auto=format&fit=crop&w=1200&q=60','https://images.unsplash.com/photo-1504198453319-5ce911bafcde?auto=format&fit=crop&w=1200&q=60'][i]; dots.querySelectorAll('.dot').forEach(x=>x.classList.remove('active')); d.classList.add('active') } }); dots.appendChild(d) });
      carousel.appendChild(dots); galCard.appendChild(carousel); stack.appendChild(galCard);

      // Latest posts
      const postsCard = createEl('div',{className:'card'});
      postsCard.appendChild(createEl('h2',{},['Latest from the Blog']));
      DEMO_POSTS.forEach(p=>{ postsCard.appendChild(createEl('div',{className:'list-item'},[ createEl('div',{},[createEl('strong',{},[p.title]), createEl('div',{className:'muted'},[p.excerpt]) ]), createEl('div',{},[createEl('button',{className:'btn ghost',onclick:()=>navigate('blog')},['Read'])]) ])) });
      stack.appendChild(postsCard);

      root.appendChild(stack);
    });

    // Reports page
    register('reports', async ()=>{
      const page = createEl('div',{className:'stack'});
      page.appendChild(createEl('div',{className:'card'},[createEl('h2',{},['Report an Issue']), createEl('p',{className:'muted'},['Your identity is kept private unless you opt-in.'])]));

      const formCard = createEl('div',{className:'card'});
      const form = createEl('form');
      form.innerHTML = "<label>Title</label><input id='r-title' placeholder='e.g. Broken borehole' required /><label>Category</label><select id='r-category'><option>Water</option><option>Roads</option><option>Education</option><option>Agriculture</option><option>Security</option><option>Other</option></select><label>Description</label><textarea id='r-desc' rows='4' placeholder='Describe the issue'></textarea><label>Location</label><input id='r-location' placeholder='e.g. Nyabasi center' /><div style='margin-top:10px'><button class='btn' type='submit'>Submit</button> <button class='btn ghost' type='button' id='cancelReport'>Cancel</button></div>";
      formCard.appendChild(form); page.appendChild(formCard);

      const listCard = createEl('div',{className:'card'}); listCard.appendChild(createEl('h2',{},['Recent Reports']));
      DEMO_REPORTS.forEach(r=>{ listCard.appendChild(createEl('div',{className:'list-item'},[ createEl('div',{},[createEl('strong',{},[r.title]), createEl('div',{className:'muted'},[r.category+' • '+r.location])]), createEl('div',{},[createEl('div',{className:'badge'},[r.status==='published'?'Published':'Open'])]) ])) });
      page.appendChild(listCard);

      root.appendChild(page);

      form.addEventListener('submit', (e)=>{ e.preventDefault(); alert('Report submitted (demo). In production this will save to Firestore.'); form.reset(); navigate('home'); });
      document.getElementById('cancelReport').addEventListener('click', ()=>{ navigate('home') });
    });

    // Opportunities
    register('opps', async ()=>{
      const page=createEl('div',{className:'stack'});
      page.appendChild(createEl('div',{className:'card'},[createEl('h2',{},['Opportunities & Alerts']), createEl('p',{className:'muted'},['Grants, bursaries, trainings and community events.'])]));
      DEMO_OPPS.forEach(o=>{ page.appendChild(createEl('div',{className:'card'},[ createEl('h3',{},[o.title]), createEl('p',{className:'small'},[o.summary]), createEl('div',{style:'margin-top:8px'},[createEl('button',{className:'btn',onclick:()=>alert('Applied (demo)')},['Apply'])]) ])) });
      root.appendChild(page);
    });

    // Volunteers
    register('volunteer', async ()=>{
      const page=createEl('div',{className:'stack'});
      page.appendChild(createEl('div',{className:'card'},[createEl('h2',{},['Volunteer Team']), createEl('p',{className:'muted'},['Join the on-ground team to support verifications and events.'])]));
      const roster = createEl('div',{className:'card'}); roster.appendChild(createEl('h3',{},['Roster'])); DEMO_VOL.forEach(v=>roster.appendChild(createEl('div',{className:'list-item'},[createEl('div',{},[createEl('strong',{},[v.name||v.uid])]), createEl('div',{},[createEl('button',{className:'btn ghost',onclick:()=>alert('Contact (demo)')},['Contact'])])]));
      roster.appendChild(createEl('div',{style:'margin-top:8px'},[createEl('button',{className:'btn',onclick:()=>{alert('Joined demo roster');}},['Join Now'])]));
      page.appendChild(roster); root.appendChild(page);
    });

    // Donate
    register('donate', async ()=>{
      const page=createEl('div',{className:'stack'});
      page.appendChild(createEl('div',{className:'card'},[createEl('h2',{},['Support a Project']), createEl('p',{className:'muted'},['Transparent micro-project funding for village services.'])]));
      const form = createEl('div',{className:'card'});
      form.innerHTML = "<label>Amount (Ksh)</label><input id='don-amt' placeholder='e.g. 500' /><label>Phone (for M-Pesa)</label><input id='don-phone' placeholder='2547xxxxxxxx' /><div style='margin-top:10px'><button class='btn' id='mpesaDemo'>Donate (M-Pesa demo)</button> <button class='btn ghost' id='cardDemo'>Donate (Card demo)</button></div>";
      page.appendChild(form);
      const ledger = createEl('div',{className:'card'}); ledger.appendChild(createEl('h3',{},['Recent Donations'])); DEMO_DON.forEach(d=>ledger.appendChild(createEl('div',{className:'list-item'},[createEl('div',{},['Ksh '+d.amount+' • '+(d.uid||'anonymous')]), createEl('div',{},[createEl('div',{className:'badge'},[d.status])])])));
      page.appendChild(ledger); root.appendChild(page);

      document.getElementById('mpesaDemo').addEventListener('click', ()=>{ alert('M-Pesa STK demo started (sandbox). In production this triggers backend STK.') });
      document.getElementById('cardDemo').addEventListener('click', ()=>{ alert('Stripe demo started (sandbox).') });
    });

    // Blog
    register('blog', async ()=>{
      const page = createEl('div',{className:'stack'});
      page.appendChild(createEl('div',{className:'card'},[createEl('h2',{},['Gisiri\'s Blog & Policy Briefs']), createEl('p',{className:'muted'},['Official statements, policy briefs and weekly updates.'])]));
      DEMO_POSTS.forEach(p=>{ page.appendChild(createEl('div',{className:'card'},[createEl('h3',{},[p.title]), createEl('p',{className:'small'},[p.excerpt]), createEl('div',{style:'margin-top:8px'},[createEl('button',{className:'btn',onclick:()=>alert(p.content)},['Read'])]) ])) });
      page.appendChild(createEl('div',{className:'card'},[createEl('h3',{},['New Post (demo editor)']), createEl('button',{className:'btn',onclick:showEditor},['Create New'])]));
      root.appendChild(page);

      function showEditor(){
        const backdrop = createEl('div',{className:'modal-backdrop'});
        const modal = createEl('div',{className:'modal card'});
        modal.innerHTML = "<div style='padding:14px'><h3>New Post</h3><label>Title</label><input id='p-title' /><label>Excerpt</label><input id='p-excerpt' /><label>Content</label><textarea id='p-content' rows='8'></textarea><div style='margin-top:8px'><button id='savePost' class='btn'>Save</button> <button id='closePost' class='btn ghost'>Cancel</button></div></div>";
        backdrop.appendChild(modal); document.body.appendChild(backdrop);
        backdrop.querySelector('#closePost').addEventListener('click', ()=>backdrop.remove());
        backdrop.querySelector('#savePost').addEventListener('click', ()=>{ alert('Post saved (demo).'); backdrop.remove(); });
      }
    });

    // Portfolio
    register('portfolio', async ()=>{
      const page=createEl('div',{className:'stack'});
      page.appendChild(createEl('div',{className:'card'},[createEl('h2',{},['Hon Gisiri Maroa — Portfolio']), createEl('p',{className:'muted'},['Selected highlights, endorsements and media.'])]));
      const gallery = createEl('div',{className:'card'}); gallery.appendChild(createEl('h3',{},['Impact Gallery'])); const grid = createEl('div',{style:'display:grid;grid-template-columns:1fr 1fr;gap:8px'});
      ['https://images.unsplash.com/photo-1505765052875-6c0a0a9e07b5?auto=format&fit=crop&w=800&q=60','https://images.unsplash.com/photo-1520975919516-6f9cf2e2d9b0?auto=format&fit=crop&w=800&q=60','https://images.unsplash.com/photo-1504198453319-5ce911bafcde?auto=format&fit=crop&w=800&q=60','https://images.unsplash.com/photo-1542744173-8e7e53415bb0?auto=format&fit=crop&w=800&q=60'].forEach(src=>{ const img=createEl('img',{src,style:'width:100%;height:120px;object-fit:cover;border-radius:8px'}); grid.appendChild(img) }); gallery.appendChild(grid); page.appendChild(gallery);
      page.appendChild(createEl('div',{className:'card'},[createEl('h3',{},['Endorsements']), createEl('p',{className:'small'},['Selected community and church leaders have publicly supported the vision — contact for references.'])]));
      root.appendChild(page);
    });

    // Admin (demo)
    register('admin', async ()=>{
      const page=createEl('div',{className:'stack'});
      page.appendChild(createEl('div',{className:'card'},[createEl('h2',{},['Admin Dashboard (Demo)']), createEl('p',{className:'muted'},['This demo shows moderation flows. In production, only admin users can access this.'])]));
      const pending = createEl('div',{className:'card'}); pending.appendChild(createEl('h3',{},['Pending Reports'])); DEMO_REPORTS.filter(r=>r.status!=='published').forEach(r=>{ pending.appendChild(createEl('div',{className:'list-item'},[ createEl('div',{},[createEl('strong',{},[r.title]), createEl('div',{className:'muted'},[r.category+' • '+r.location])]), createEl('div',{},[createEl('button',{className:'btn',onclick:()=>{ alert('Published (demo)'); }},['Publish']), createEl('button',{className:'btn ghost',onclick:()=>{ alert('Rejected (demo)'); }},['Reject'])]) ])) });
      page.appendChild(pending);

      const volunteers = createEl('div',{className:'card'}); volunteers.appendChild(createEl('h3',{},['Volunteers'])); DEMO_VOL.forEach(v=>volunteers.appendChild(createEl('div',{className:'list-item'},[createEl('div',{},[v.name||v.uid]), createEl('div',{},[createEl('button',{className:'btn ghost',onclick:()=>alert('Message sent (demo)')},['Message'])])])));
      page.appendChild(volunteers);

      const donations = createEl('div',{className:'card'}); donations.appendChild(createEl('h3',{},['Donations'])); DEMO_DON.forEach(d=>donations.appendChild(createEl('div',{className:'list-item'},[createEl('div',{},['Ksh '+d.amount]), createEl('div',{},[createEl('div',{className:'badge'},[d.status])])])));
      page.appendChild(donations);

      root.appendChild(page);
    });

    // Initialize
    const start = location.hash.replace('#','') || 'home'; navigate(start);

    // enable keyboard toggle for accessibility
    burger.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); burger.click(); } });

    // small helper for accent var used in CSS (set from JS to ensure consistency)
    const style = document.createElement('style'); style.textContent = `:root{--accent:${'#7c3aed'}}`; document.head.appendChild(style);

  })();
  </script>
</body>
</html>
